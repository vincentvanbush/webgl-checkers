<html>
<head>
  <title>HTML5 Hacks - Server Sent Events</title>
  <meta charset="utf-8" />
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js">
  </script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.js"> </script>
</head>
<body>

  <form id="player_form" action="/players" method="post">
    <input type="text" id="nick" name="nick" placeholder="Your nickname" />
    <input type="submit" value="Submit" />
  </form>

  <div id="player_list">

  </div>

  <script type='text/javascript'>
  /* attach a submit handler to the form */
  $("#player_form").submit(function(event) {

    /* stop form from submitting normally */
    event.preventDefault();

    /* get some values from elements on the page: */
    var $form = $( this ),
    url = $form.attr( 'action' );

    /* Send the data using post */
    var posting = $.post( url, { nick: $('#nick').val() } );

    /* Alerts the results */
    posting.done(function( data ) {
      // alert(data);
      // $("#player_list").append('<a href="/games/testgame?uid="' + data.toString() + '">' + $('#nick').val()  + '</a><br />');
      var link = $( '<a/>', { href: '/games/testgame?uid=' + data, text: $('#nick').val()  } );
      $("#player_list").append(link);
      $("#player_list").append('<br/>');
    });
  });
  </script>


  <!-- <div id="container" style="display:none">
    <div id="basic-template">
      <a class="ui-notify-cross ui-notify-close" href="#">x</a>
      <h1>#{title}</h1>
      <p>#{text}</p>
    </div>
  </div>

  <script type="text/javascript" src="/js/recv-es.js"></script> -->

</body>
</html>
